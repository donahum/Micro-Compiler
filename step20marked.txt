

;IR code
;PUSH 
;JSR FUNC_main
;HALT
;LABEL FUNC_main
;LINK 0
;READI a
;READI b
;READI c
;MULI a b !T0
;ADDI c !T0 !T1
;MULI a b !T2
;ADDI !T2 c !T3
;DIVI !T3 a !T4
;ADDI !T1 !T4 !T5
;STOREI 20 !T6
;ADDI !T5 !T6 !T7
;STOREI !T7 c
;MULI b b !T0
;ADDI !T0 a !T1
;STOREI !T1 b
;MULI b a !T0
;DIVI !T0 a !T1
;STOREI !T1 a
;WRITEI c  
;WRITEI b  
;WRITEI a  
;UNLINK
;RET
var c
var b
var a
push 
jsr FUNC_main
sys halt
label FUNC_main
link 0
sys readi  a
sys readi  b
sys readi  c

move a r0
muli b r0
;a*b

move c r1
addi r0 r1
;a*b+c

move a r2
muli b r2
move r2 r3
addi c r3
move r3 r4
divi a r4
;(a*b+c)/a

move r1 r5
addi r4 r5
;c+a*b+(a*b+c)/a

move 20 r6
move r5 r7
addi r6 r7
;complete expression

move r7 c
;stored in c

move b r0
muli b r0
move r0 r1
addi a r1
move r1 b
move b r0
muli a r0
move r0 r1
divi a r1
move r1 a
sys writei  c
sys writei  b
sys writei  a
unlnk
ret
